<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta content="æ¸¬è©¦å‹æ…‹å®£å‘Š, TypeScript, Testing Type Declaration" name="keywords">
    <meta
      content="Effective TypeScript ç³»åˆ—ï¼šæ¸¬è©¦å‹åˆ¥å®£å‘Š - Han"
      property="og:title"
    />
    <meta
      content="ç´€éŒ„ han çš„å‰ç«¯/ç”Ÿæ´»/å„ç¨®ç­†è¨˜èˆ‡æ—¥å¸¸ï½ï¼ - æ¢ç´¢å¦‚ä½•æ¸¬è©¦ TypeScript ä¸­çš„å‹åˆ¥å®£å‘Šï¼Œé€™ç¯‡æ–‡ç« æ·±å…¥æ¢è¨äº†å…©ç¨®ä¸»è¦ç­–ç•¥ï¼šç¨‹å¼ç¢¼å…§éƒ¨å’Œå‹åˆ¥æª¢æŸ¥å™¨å¤–éƒ¨çš„æ¸¬è©¦æ–¹æ³•ã€‚å¾ç¢ºä¿ function æ­£å¸¸åŸ·è¡Œåˆ°é©—è­‰è¿”å›å€¼çš„å‹åˆ¥ï¼Œé€™ç¯‡æ–‡ç« æä¾›äº†å¹¾å€‹æŠ€å·§å’Œå·¥å…·ï¼Œå¹«åŠ©ä½ ç¢ºä¿ TypeScript å‹åˆ¥çš„æº–ç¢ºæ€§å’Œå¯é æ€§ã€‚"
      property="og:description"
    />
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">




<title>Effective TypeScript ç³»åˆ—ï¼šæ¸¬è©¦å‹åˆ¥å®£å‘Š | Han</title>
<link rel="canonical" href="http://localhost:1313/posts/testing-type-declarations/">
<meta name="description" content="æ¢ç´¢å¦‚ä½•æ¸¬è©¦ TypeScript ä¸­çš„å‹åˆ¥å®£å‘Šï¼Œé€™ç¯‡æ–‡ç« æ·±å…¥æ¢è¨äº†å…©ç¨®ä¸»è¦ç­–ç•¥ï¼šç¨‹å¼ç¢¼å…§éƒ¨å’Œå‹åˆ¥æª¢æŸ¥å™¨å¤–éƒ¨çš„æ¸¬è©¦æ–¹æ³•ã€‚å¾ç¢ºä¿ function æ­£å¸¸åŸ·è¡Œåˆ°é©—è­‰è¿”å›å€¼çš„å‹åˆ¥ï¼Œé€™ç¯‡æ–‡ç« æä¾›äº†å¹¾å€‹æŠ€å·§å’Œå·¥å…·ï¼Œå¹«åŠ©ä½ ç¢ºä¿ TypeScript å‹åˆ¥çš„æº–ç¢ºæ€§å’Œå¯é æ€§ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Effective TypeScript ç³»åˆ—ï¼šæ¸¬è©¦å‹åˆ¥å®£å‘Š | Han" />
<meta property="og:url" content="http://localhost:1313/posts/testing-type-declarations/" />
<meta property="og:description" content="æ¢ç´¢å¦‚ä½•æ¸¬è©¦ TypeScript ä¸­çš„å‹åˆ¥å®£å‘Šï¼Œé€™ç¯‡æ–‡ç« æ·±å…¥æ¢è¨äº†å…©ç¨®ä¸»è¦ç­–ç•¥ï¼šç¨‹å¼ç¢¼å…§éƒ¨å’Œå‹åˆ¥æª¢æŸ¥å™¨å¤–éƒ¨çš„æ¸¬è©¦æ–¹æ³•ã€‚å¾ç¢ºä¿ function æ­£å¸¸åŸ·è¡Œåˆ°é©—è­‰è¿”å›å€¼çš„å‹åˆ¥ï¼Œé€™ç¯‡æ–‡ç« æä¾›äº†å¹¾å€‹æŠ€å·§å’Œå·¥å…·ï¼Œå¹«åŠ©ä½ ç¢ºä¿ TypeScript å‹åˆ¥çš„æº–ç¢ºæ€§å’Œå¯é æ€§ã€‚" />








<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
 
  </head>

  <body>
    <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="http://localhost:1313/">Han</a>

        <nav class="menu">
            
                <div class="menu-item">
                    
                        <a href="/posts/">Posts</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/about/">About</a>
                    
                </div>
            
        </nav>
    </div>
</header>

    <main class="main-wrapper">
      <div class="main">

<section class="single">
    <h1 class="title">Effective TypeScript ç³»åˆ—ï¼šæ¸¬è©¦å‹åˆ¥å®£å‘Š</h1>

    
        <div class="tip">
            <time datetime="2024-04-07 11:20:02 &#43;0800 CST">2024/04/07</time>
            <span class="split">Â·</span>
            <span> 1579 words </span>
            <span class="split">Â·</span>
            <span>
                4 minutes to read
            </span>
        </div>
    

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/typescript">TypeScript</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/effective-typescript">Effective TypeScript</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <h3 id="å‰æƒ…æè¦">å‰æƒ…æè¦ <a href="#%e5%89%8d%e6%83%85%e6%8f%90%e8%a6%81" class="anchor">ğŸ”—</a></h3><p>ä¸Šä¸€ç¯‡<a href="https://www.zzuhann.work/posts/type-declaration-tips/" target="_blank">Effective TypeScript CH6 - æ’°å¯« TypeScript å‹æ…‹å®£å‘Šæ™‚çš„æ³¨æ„äº‹é …</a>
æåˆ°çš„ï¼Œåœ¨æ’°å¯«å‹æ…‹å®£å‘Šæ™‚è¦æ³¨æ„çš„äº‹é …ï¼Œè€Œé€™ä¸€ç¯‡æœƒæåˆ°æ’°å¯«å®Œä¹‹å¾Œï¼Œè¦å¦‚ä½•æ¸¬è©¦å‹æ…‹å®£å‘Šã€‚</p>
<p>æ›¸ä¸­æåˆ°çš„æ–¹æ³•ä¸»è¦åˆ†ç‚ºå…©ç¨®ï¼šä¸€ç¨®åœ¨ç¨‹å¼ç¢¼å…§æ¸¬è©¦å‹æ…‹å®£å‘Šã€ä¸€ç¨®å‰‡æ˜¯åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢ã€‚</p>
<h3 id="é€™ç¯‡æ–‡æœƒæåˆ°">é€™ç¯‡æ–‡æœƒæåˆ° <a href="#%e9%80%99%e7%af%87%e6%96%87%e6%9c%83%e6%8f%90%e5%88%b0" class="anchor">ğŸ”—</a></h3><ul>
<li><a href="#%E5%9C%A8%E7%A8%8B%E5%BC%8F%E7%A2%BC%E5%85%A7%E5%B8%B8%E8%A6%8B%E7%9A%84%E5%81%9A%E6%B3%95">åœ¨ç¨‹å¼ç¢¼å…§ï¼Œå¸¸è¦‹çš„åšæ³•</a>
<ul>
<li><a href="#%E7%A2%BA%E4%BF%9D-function-%E5%8F%AF%E4%BB%A5%E6%AD%A3%E5%B8%B8%E5%9F%B7%E8%A1%8C%E4%B8%8D%E6%9C%83%E5%A0%B1%E9%8C%AF">ç¢ºä¿ function å¯ä»¥æ­£å¸¸åŸ·è¡Œï¼Œä¸æœƒå ±éŒ¯</a></li>
<li><a href="#%E5%B0%87%E7%B5%90%E6%9E%9C%E6%8C%87%E6%B4%BE%E7%B5%A6%E7%89%B9%E5%AE%9A%E5%9E%8B%E6%85%8B%E7%9A%84%E8%AE%8A%E6%95%B8">å°‡çµæœæŒ‡æ´¾çµ¦ç‰¹å®šå‹æ…‹çš„è®Šæ•¸</a></li>
<li><a href="#%E5%AE%9A%E7%BE%A9%E4%B8%80%E5%80%8B%E5%8D%94%E5%8A%A9%E5%87%BD%E5%BC%8F">å®šç¾©ä¸€å€‹å”åŠ©å‡½å¼</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8%E5%9E%8B%E6%85%8B%E6%AA%A2%E6%9F%A5%E5%99%A8%E5%A4%96%E9%9D%A2%E9%80%B2%E8%A1%8C%E6%B8%AC%E8%A9%A6">åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæ¸¬è©¦</a></li>
</ul>
<h3 id="åœ¨ç¨‹å¼ç¢¼å…§å¸¸è¦‹çš„åšæ³•">åœ¨ç¨‹å¼ç¢¼å…§ï¼Œå¸¸è¦‹çš„åšæ³• <a href="#%e5%9c%a8%e7%a8%8b%e5%bc%8f%e7%a2%bc%e5%85%a7%e5%b8%b8%e8%a6%8b%e7%9a%84%e5%81%9a%e6%b3%95" class="anchor">ğŸ”—</a></h3><h4 id="ç¢ºä¿-function-å¯ä»¥æ­£å¸¸åŸ·è¡Œä¸æœƒå ±éŒ¯">ç¢ºä¿ function å¯ä»¥æ­£å¸¸åŸ·è¡Œï¼Œä¸æœƒå ±éŒ¯ <a href="#%e7%a2%ba%e4%bf%9d-function-%e5%8f%af%e4%bb%a5%e6%ad%a3%e5%b8%b8%e5%9f%b7%e8%a1%8c%e4%b8%8d%e6%9c%83%e5%a0%b1%e9%8c%af" class="anchor">ğŸ”—</a></h4><p>æœ‰ä¸€å€‹ function</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="nx">map</span><span class="p">([</span><span class="s2">&#34;2017&#34;</span><span class="p">,</span> <span class="s2">&#34;2018&#34;</span><span class="p">,</span> <span class="s2">&#34;2019&#34;</span><span class="p">],</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">v</span><span class="p">));</span>
</span></span></code></pre></div><p>é€éæ¸¬è©¦ä¾†ç¢ºä¿é€™å€‹ function å¯ä»¥æ­£å¸¸åŸ·è¡Œ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="c1">// æ¸¬è©¦ map å‡½å¼æ˜¯å¦æ­£ç¢ºè½‰æ›å­—ä¸²é™£åˆ—ç‚ºæ•¸å­—é™£åˆ—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">test</span><span class="p">(</span><span class="s2">&#34;map function converts string array to number array&#34;</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">input</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;2017&#34;</span><span class="p">,</span> <span class="s2">&#34;2018&#34;</span><span class="p">,</span> <span class="s2">&#34;2019&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">expected</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span> <span class="mi">2019</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">v</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nx">expect</span><span class="p">(</span><span class="nx">result</span><span class="p">).</span><span class="nx">toEqual</span><span class="p">(</span><span class="nx">expected</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><p>é€™å€‹æ–¹å¼å¯ä»¥ç¢ºä¿é€™å€‹ function å¯ä»¥æ­£å¸¸åŸ·è¡Œï¼Œä¸æœƒå ±éŒ¯ã€‚å•é¡Œåœ¨æ–¼æ²’æœ‰æ¸¬è©¦åˆ° return çš„ type æ˜¯å¦æ­£ç¢ºï¼Œæ‰€ä»¥æ¥ä¸‹ä¾†çš„æ–¹å¼æœƒå»æª¢æŸ¥ return çš„ type æ˜¯å¦æ­£ç¢ºã€‚</p>
<h4 id="å°‡çµæœæŒ‡æ´¾çµ¦ç‰¹å®šå‹æ…‹çš„è®Šæ•¸">å°‡çµæœæŒ‡æ´¾çµ¦ç‰¹å®šå‹æ…‹çš„è®Šæ•¸ <a href="#%e5%b0%87%e7%b5%90%e6%9e%9c%e6%8c%87%e6%b4%be%e7%b5%a6%e7%89%b9%e5%ae%9a%e5%9e%8b%e6%85%8b%e7%9a%84%e8%ae%8a%e6%95%b8" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">lengths</span>: <span class="kt">number</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">map</span><span class="p">([</span><span class="s2">&#34;john&#34;</span><span class="p">,</span> <span class="s2">&#34;may&#34;</span><span class="p">],</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
</span></span></code></pre></div><p>é€™å€‹æ–¹å¼ç¢ºå¯¦å¯ä»¥ç¢ºä¿ return çš„ type æ˜¯æˆ‘å€‘æ‰€æœŸæœ›çš„ï¼Œä½†åŒæ™‚ä¹Ÿæœƒå¸¶ä¾†ä¸€å€‹å•é¡Œï¼šç‚ºäº†è³¦äºˆçµæœç‰¹å®šçš„ typeï¼Œå¿…é ˆå¤šå®£å‘Šä¸€å€‹è®Šæ•¸ï¼Œè€Œé€™å€‹è®Šæ•¸é™¤äº†ç”¨ä¾†æª¢æŸ¥ return çš„ type ä»¥å¤–æ²’æœ‰å…¶ä»–ç”¨é€”ã€‚</p>
<p>é€™æ¨£çš„æƒ…æ³ä¸‹ï¼Œeslint å¯èƒ½æœƒæœ‰æœªä½¿ç”¨è®Šæ•¸çš„ warning æˆ– errorï¼Œéœ€è¦å†é¡å¤–è™•ç†ã€‚</p>
<p><img src="/gif/ts-eslint-ignore.gif" alt="ts-eslint-ignore"></p>
<h4 id="å®šç¾©ä¸€å€‹å”åŠ©å‡½å¼">å®šç¾©ä¸€å€‹å”åŠ©å‡½å¼ <a href="#%e5%ae%9a%e7%be%a9%e4%b8%80%e5%80%8b%e5%8d%94%e5%8a%a9%e5%87%bd%e5%bc%8f" class="anchor">ğŸ”—</a></h4><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">assertType</span><span class="p">&lt;</span><span class="nt">T</span><span class="p">&gt;(</span><span class="nx">x</span>: <span class="kt">T</span><span class="p">)</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="p">&lt;</span><span class="nt">number</span><span class="err">[]</span><span class="p">&gt;(</span><span class="nx">map</span><span class="p">([</span><span class="s2">&#34;john&#34;</span><span class="p">,</span> <span class="s2">&#34;paul&#34;</span><span class="p">],</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">));</span>
</span></span></code></pre></div><p>é€™å€‹æ–¹å¼çš„å•é¡Œåœ¨æ–¼</p>
<ol>
<li>æª¢æŸ¥çš„æ˜¯å…©ç¨®å‹æ…‹çš„å¯è³¦å€¼æ€§ï¼Œè€Œä¸æ˜¯ç›¸ç­‰æ€§</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span> <span class="c1">// n çš„ type ç‚º 12
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">assertType</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span><span class="nx">n</span><span class="p">);</span> <span class="c1">// OKï¼Œå› ç‚º 12 æ˜¯ number çš„å­å‹æ…‹
</span></span></span></code></pre></div><p>åœ¨é€™å€‹ä¾‹å­ä¸­ <code>n</code> çš„å‹åˆ¥ç‚º 12ï¼Œé€é <code>assertType</code> é æœŸå®ƒçš„å‹æ…‹ç‚º <code>number</code>ï¼Œå› ç‚º <code>12</code> ç‚º <code>number</code> çš„å­å‹æ…‹ï¼Œæ‰€ä»¥æ˜¯æœƒé€šéå‹æ…‹æª¢æŸ¥çš„ï¼Œå› ç‚º <code>12</code> ä¹Ÿæ˜¯ <code>number</code> çš„ä¸€ç¨®ã€‚</p>
<ol start="2">
<li>ç‰©ä»¶å‹æ…‹æª¢æŸ¥ç‚º structural typingï¼Œåªè¦æœ‰ç¬¦åˆæˆ‘éœ€è¦çš„ type å³å¯ï¼Œå¦‚æœæœ‰å¤šçš„ key ä¸æœƒæª¢æŸ¥</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">beatles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;john&#34;</span><span class="p">,</span> <span class="s2">&#34;paul&#34;</span><span class="p">,</span> <span class="s2">&#34;george&#34;</span><span class="p">,</span> <span class="s2">&#34;ringo&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="o">&lt;</span><span class="p">{</span> <span class="nx">name</span>: <span class="kt">string</span> <span class="p">}[]</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">map</span><span class="p">(</span><span class="nx">beatles</span><span class="p">,</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">inYellowSubmarine</span>: <span class="kt">name</span> <span class="o">===</span> <span class="s2">&#34;ringo&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">}))</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span> <span class="c1">// OK
</span></span></span></code></pre></div><p>åœ¨é€™å€‹ä¾‹å­ä¸­é æœŸçµæœå‹æ…‹ç‚º <code>{name: string}[]</code>ï¼Œç„¶è€Œå¯¦éš›ä¸Š map å‡ºä¾†çš„çµæœç‚º <code>{name: string, inYellowSubmarine: boolean}[]</code>ï¼Œå› ç‚ºåªé æœŸéœ€è¦ <code>name</code> é€™å€‹ keyï¼Œæ‰€ä»¥ <code>{name: string, inYellowSubmarine: boolean}[]</code> ä»–åªæœƒå»æª¢æŸ¥æ˜¯å¦æœ‰ <code>name</code>ã€ç¬¦åˆ <code>string</code>ã€ä¸”ç‚ºé™£åˆ—å‹æ…‹ï¼Œå³ä½¿æœ‰å¤šçš„ key ä¹Ÿä¸æœƒæª¢æŸ¥ï¼Œå› ç‚ºå·²ç¶“ç¬¦åˆäº†æˆ‘æ‰€éœ€è¦çš„ typeã€‚</p>
<ol start="3">
<li>function åƒæ•¸å¯ä»¥æ¯”å‹æ…‹å®£å‘Šå¾—å¤š</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">add</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">b</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="o">&lt;</span><span class="p">(</span><span class="nx">a</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">b</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">number</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">add</span><span class="p">);</span> <span class="c1">// OK
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">double</span><span class="o">:</span> <span class="p">(</span><span class="nx">a</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">b</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">number</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="o">&lt;</span><span class="p">(</span><span class="nx">a</span>: <span class="kt">number</span><span class="p">,</span> <span class="nx">b</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="kt">number</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">double</span><span class="p">);</span> <span class="c1">// OK
</span></span></span></code></pre></div><p>é€™æ˜¯å¸¸è¦‹çš„ JavaScript patternï¼šfunction æ¥å—å¤šå€‹åƒæ•¸ï¼Œåœ¨å‘¼å«æ™‚è¦å‚³å…¥å¹¾å€‹åƒæ•¸ï¼ˆå¯ä»¥æ˜¯ 0 å€‹ï¼Œç•¶ç„¶ï¼Œä¸èƒ½å‚³è¶…éæŒ‡å®šåƒæ•¸çš„æ•¸é‡ï¼‰ç”±å‘¼å«è€…æ±ºå®šã€‚ç‚ºäº†å’Œ JavaScript ä¸­å¸¸è¦‹çš„ pattern ä¿æŒä¸€è‡´ï¼ŒTypeScript ä¹Ÿæœƒå®¹è¨±é€™å€‹è¡Œç‚ºã€‚</p>
<p>å¯ä»¥åƒè€ƒé€™ç¯‡æ–‡ç« ï¼Œé€™æ˜¯ä¾†è‡ª TypeScript çš„ FAQï¼š<a href="https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-functions-with-fewer-parameters-assignable-to-functions-that-take-more-parameters" target="_blank">Why are functions with fewer parameters assignable to functions that take more parameters?</a>
</p>
<p>å¦‚æœæƒ³è¦ç¢ºä¿åƒæ•¸çš„æ•¸é‡åŠå‹åˆ¥ï¼Œå¯ä»¥æŠŠ function çš„åƒæ•¸åŠ return type åˆ†é–‹ä¾†æ¸¬è©¦ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">double</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span>: <span class="kt">number</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">p</span>: <span class="kt">Parameters</span><span class="p">&lt;</span><span class="nt">typeof</span> <span class="na">double</span><span class="p">&gt;</span> <span class="o">=</span> <span class="kc">null</span><span class="o">!</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">number</span><span class="p">,</span> <span class="kt">number</span><span class="p">]</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">//                           ~ Argument of type &#39;[number]&#39; is not
</span></span></span><span class="line"><span class="cl"><span class="c1">//                             assignable to parameter of type [number, number]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">let</span> <span class="nx">r</span>: <span class="kt">ReturnType</span><span class="p">&lt;</span><span class="nt">typeof</span> <span class="na">double</span><span class="p">&gt;</span> <span class="o">=</span> <span class="kc">null</span><span class="o">!</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">assertType</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span><span class="nx">r</span><span class="p">);</span> <span class="c1">// OK
</span></span></span></code></pre></div><h3 id="åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæ¸¬è©¦">åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæ¸¬è©¦ <a href="#%e5%9c%a8%e5%9e%8b%e6%85%8b%e6%aa%a2%e6%9f%a5%e5%99%a8%e5%a4%96%e9%9d%a2%e9%80%b2%e8%a1%8c%e6%b8%ac%e8%a9%a6" class="anchor">ğŸ”—</a></h3><p>å› ç‚ºæœ‰å¯èƒ½é€éä¸€äº›æ–¹å¼ï¼ŒæŠŠ <code>any</code> æŒ‡æ´¾çµ¦æ•´å€‹æ¨¡çµ„ï¼Œè®“ TypeScript ä¸å†å°æ•´å€‹æ¨¡çµ„é€²è¡Œå‹æ…‹æª¢æŸ¥ï¼Œå³ä½¿ä½ å°å„ç¨®å‹æ…‹å®£å‘Šåšäº†åš´æ ¼çš„æ¸¬è©¦ã€‚
ï¼ˆä½œè€…åœ¨æ›¸ä¸­æåˆ° <code>declare module 'overbar'</code>çš„æ–¹å¼æœƒé€ æˆé€™å€‹çµæœï¼Œä½†æ˜¯æˆ‘è©¦ä¸å‡ºä¾†ï¼Œæ‰€ä»¥æä¾›çµ¦å¤§å®¶å¯èƒ½æœ‰é€™æ¨£çš„æƒ…å½¢ QQ ï½ï½ï¼‰</p>
<p>å› æ­¤ä½œè€…èªç‚ºåœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæª¢æŸ¥æ˜¯æ¯”è¼ƒå¥½çš„åšæ³•ï¼Œä»¥ DefinitelyTyped å­˜æ”¾çš„å‹æ…‹å®£å‘Šè€Œè¨€(ä¹‹å‰æåˆ°çš„ <code>@types</code>)ï¼Œæ˜¯é€é <code>dtslint</code> åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæª¢æŸ¥ã€‚</p>
<p>èªæ³•ä¾†èªªå¯èƒ½æœƒé¡ä¼¼é€™æ¨£ï¼ˆå–è‡ªæ›¸ä¸­ç¨‹å¼ç¢¼ï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">beatles</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&#34;john&#34;</span><span class="p">,</span> <span class="s2">&#34;paul&#34;</span><span class="p">,</span> <span class="s2">&#34;george&#34;</span><span class="p">,</span> <span class="s2">&#34;ringo&#34;</span><span class="p">];</span>
</span></span><span class="line"><span class="cl"><span class="nx">map</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">beatles</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kd">function</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">name</span><span class="p">,</span> <span class="c1">// $ExpectType string
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">i</span><span class="p">,</span> <span class="c1">// $ExpectType number
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">array</span> <span class="c1">// $ExpectType string[]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">;</span> <span class="c1">// $ExpectType string[]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">return</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span> <span class="c1">// $ExpectType number[]
</span></span></span></code></pre></div><p>ä½œè€…æœ‰æåˆ°ï¼Œ<code>dtslint</code> ä¸æ˜¯æª¢æŸ¥å¯è³¦å€¼æ€§ï¼Œè€Œæ˜¯æª¢æŸ¥å„å€‹ä»£è™Ÿçš„å‹æ…‹ï¼Œä¹Ÿæœƒé€²è¡Œå­—é¢æ¯”è¼ƒï¼Œç¬¦åˆåœ¨ç·¨è¼¯å™¨ä¸­æ‰‹å‹•æ¸¬è©¦å‹æ…‹å®£å‘Šå¼çš„åšæ³•ï¼š<code>dtslint</code> æ˜¯å°‡é€™å€‹ç¨‹åºè‡ªå‹•åŒ–ã€‚</p>
<p>ä¸éé€™ä¸€å¡Šæˆ‘æ²’æœ‰æ¶‰çµéï¼Œæ‰€ä»¥å…ˆè¨˜éŒ„èµ·ä¾†ï½ï¼å¾€å¾Œæ¥è§¸åˆ°çš„è©±æ‡‰è©²æœƒæ›´æœ‰å¿ƒå¾—ã€‚</p>
<h3 id="ç¸½çµ">ç¸½çµ <a href="#%e7%b8%bd%e7%b5%90" class="anchor">ğŸ”—</a></h3><p>é€™ç¯‡æåˆ°äº†å¦‚ä½•æ¸¬è©¦æ’°å¯«å¥½çš„å‹æ…‹å®£å‘Š
ä¸»è¦åˆ†ç‚ºåœ¨ç¨‹å¼ç¢¼å…§æ¸¬è©¦ã€ä»¥åŠåœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–æ¸¬è©¦</p>
<ul>
<li>ç¨‹å¼ç¢¼å…§æ¸¬è©¦ï¼Œå¸¸è¦‹çš„åšæ³•
<ul>
<li>ç¢ºä¿ function å¯ä»¥æ­£å¸¸åŸ·è¡Œï¼Œä¸æœƒå ±éŒ¯</li>
<li>å°‡çµæœæŒ‡æ´¾çµ¦ç‰¹å®šå‹æ…‹çš„è®Šæ•¸</li>
<li>å®šç¾©ä¸€å€‹å”åŠ©å‡½å¼</li>
</ul>
</li>
<li>åœ¨å‹æ…‹æª¢æŸ¥å™¨å¤–é¢é€²è¡Œæ¸¬è©¦</li>
</ul>
<h3 id="ref-åƒè€ƒ">REF åƒè€ƒ <a href="#ref-%e5%8f%83%e8%80%83" class="anchor">ğŸ”—</a></h3><ul>
<li><a href="https://github.com/Microsoft/TypeScript/wiki/FAQ#why-are-functions-with-fewer-parameters-assignable-to-functions-that-take-more-parameters" target="_blank">Why are functions with fewer parameters assignable to functions that take more parameters?</a>
</li>
<li><a href="https://www.books.com.tw/products/0010858053" target="_blank">Effective TypeScript ä¸­æ–‡ç‰ˆ</a>
</li>
</ul>

    </div>

    

    <div class="disqus markdown" style="width: 100%;">
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-www-zzuhann-work';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</section>

</div>
      <div class="side">
         <div class="side-recent">
    <h2 class="side-title">
        <a href="/posts/">Recent Posts</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/posts/ts-unknown-vs-any/">Ts Unknown vs Any</a>
            </li>
        
            <li>
                <a href="/posts/use-slug-for-dynamic-routes/">ä½¿ç”¨ Next.js çš„ Dynamic Routes ä¾†è™•ç†å¤šå±¤çµæ§‹çš„é é¢</a>
            </li>
        
            <li>
                <a href="/posts/use-flex-to-limit-font-size/">ä½¿ç”¨ flex box ä¾†é˜²æ­¢å­—é«”è¢«å‹•æ…‹èª¿æ•´ï¼Ÿ</a>
            </li>
        
            <li>
                <a href="/posts/strict-false-ignore-null-ts/">tsconfig è¨­å®š strict: false æœƒå¿½ç•¥ null çš„å‹åˆ¥åˆ¤å®š</a>
            </li>
        
            <li>
                <a href="/posts/brain-can-not-multiwork/">è®€æ›¸æ—¥è¨˜ | å¤§è…¦æ²’è¾¦æ³•å¤šå·¥ï¼Œå³ä½¿è¨“ç·´ä¹Ÿä¸€æ¨£ï¼</a>
            </li>
        
    </ul>
</div>
 
        <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/typescript">typescript(4)</a>
            </li>
        
            <li>
                <a href="/categories/%E5%89%8D%E7%AB%AF">å‰ç«¯(2)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%8A%80%E8%A1%93">æŠ€è¡“(6)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%9D%82%E6%8A%80%E6%B5%85%E5%B0%9D">æ‚æŠ€æµ…å°(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%A7%80%E7%9C%8B%E7%AD%86%E8%A8%98">è§€çœ‹ç­†è¨˜(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%AE%80%E6%9B%B8%E6%97%A5%E8%A8%98">è®€æ›¸æ—¥è¨˜(2)</a>
            </li>
        
    </ul>
</div>
 <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/css">css (1)</a>
            </li>
        
            <li>
                <a href="/tags/css-challenge">css challenge (1)</a>
            </li>
        
            <li>
                <a href="/tags/effective-typescript">effective typescript (4)</a>
            </li>
        
            <li>
                <a href="/tags/hugo">hugo (3)</a>
            </li>
        
            <li>
                <a href="/tags/next.js">next.js (1)</a>
            </li>
        
            <li>
                <a href="/tags/reading-diary">reading diary (2)</a>
            </li>
        
            <li>
                <a href="/tags/typescript">typescript (1)</a>
            </li>
        
            <li>
                <a href="/tags/video-diary">video diary (1)</a>
            </li>
        
    </ul>
</div>

      </div>
    </main>
  </body>
</html>
