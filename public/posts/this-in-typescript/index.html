<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta content="this, TypeScript" name="keywords">
    <meta
      content="Effective TypeScript ç³»åˆ—ï¼šJavaScript èˆ‡ TypeScript è£¡é¢çš„ this - Han"
      property="og:title"
    />
    <meta
      content="ç´€éŒ„ han çš„å‰ç«¯/ç”Ÿæ´»/å„ç¨®ç­†è¨˜èˆ‡æ—¥å¸¸ï½ï¼ - é€™ç¯‡æ–‡ç« æåˆ°äº†åœ¨ JavaScript å’Œ TypeScript ä¸­çš„ thisã€‚å¾ JavaScript çš„è§’åº¦å‡ºç™¼ï¼Œè¨è«–äº† this çš„æ¦‚å¿µï¼Œå†åˆ° TypeScript çš„ thisï¼Œä»‹ç´¹å¦‚ä½•ç‚º function åŠ ä¸Š this åƒæ•¸çš„å‹åˆ¥ã€‚"
      property="og:description"
    />
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">




<title>Effective TypeScript ç³»åˆ—ï¼šJavaScript èˆ‡ TypeScript è£¡é¢çš„ this | Han</title>
<link rel="canonical" href="http://localhost:1313/posts/this-in-typescript/">
<meta name="description" content="é€™ç¯‡æ–‡ç« æåˆ°äº†åœ¨ JavaScript å’Œ TypeScript ä¸­çš„ thisã€‚å¾ JavaScript çš„è§’åº¦å‡ºç™¼ï¼Œè¨è«–äº† this çš„æ¦‚å¿µï¼Œå†åˆ° TypeScript çš„ thisï¼Œä»‹ç´¹å¦‚ä½•ç‚º function åŠ ä¸Š this åƒæ•¸çš„å‹åˆ¥ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Effective TypeScript ç³»åˆ—ï¼šJavaScript èˆ‡ TypeScript è£¡é¢çš„ this | Han" />
<meta property="og:url" content="http://localhost:1313/posts/this-in-typescript/" />
<meta property="og:description" content="é€™ç¯‡æ–‡ç« æåˆ°äº†åœ¨ JavaScript å’Œ TypeScript ä¸­çš„ thisã€‚å¾ JavaScript çš„è§’åº¦å‡ºç™¼ï¼Œè¨è«–äº† this çš„æ¦‚å¿µï¼Œå†åˆ° TypeScript çš„ thisï¼Œä»‹ç´¹å¦‚ä½•ç‚º function åŠ ä¸Š this åƒæ•¸çš„å‹åˆ¥ã€‚" />








<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
 
  </head>

  <body>
    <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="http://localhost:1313/">Han</a>

        <nav class="menu">
            
                <div class="menu-item">
                    
                        <a href="/posts/">Posts</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/about/">About</a>
                    
                </div>
            
        </nav>
    </div>
</header>

    <main class="main-wrapper">
      <div class="main">

<section class="single">
    <h1 class="title">Effective TypeScript ç³»åˆ—ï¼šJavaScript èˆ‡ TypeScript è£¡é¢çš„ this</h1>

    
        <div class="tip">
            <time datetime="2024-04-07 22:49:37 &#43;0800 CST">2024/04/07</time>
            <span class="split">Â·</span>
            <span> 1592 words </span>
            <span class="split">Â·</span>
            <span>
                4 minutes to read
            </span>
        </div>
    

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/typescript">TypeScript</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/effective-typescript">Effective TypeScript</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <h3 id="å‰è¨€">å‰è¨€ <a href="#%e5%89%8d%e8%a8%80" class="anchor">ğŸ”—</a></h3><p>é€™ç¯‡çš„å…§å®¹ä¸»è¦æœƒåˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼šåœ¨ JavaScript å…§çš„ thisã€ä»¥åŠåœ¨ TypeScript å…§çš„ thisã€‚å› ç‚ºå…ˆå‰å°±å° <code>this</code> æ„Ÿåˆ°é™Œç”Ÿã€å¥½åƒäº†è§£äº†åˆå¥½åƒæ²’æœ‰ï¼Œæ›¸ä¸Šå°æ–¼ <code>this</code> çš„è‘—å¢¨æˆ‘è¦ºå¾—ä¹Ÿä¸å¤šï¼Œæ‰€ä»¥é€é huli å¤§å¤§çš„é€™ç¯‡æ–‡ç«  <a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">æ·ºè«‡ JavaScript é ­è™Ÿé›£é¡Œ thisï¼šçµ•å°ä¸å®Œæ•´ï¼Œä½†ä¿è­‰å¥½æ‡‚</a>
 å¢åŠ è‡ªå·±å°æ–¼ JavaScript å…§ <code>this</code> çš„ç†è§£ï¼Œå†å›é ­å»çœ‹æ›¸ä¸­å°æ–¼ TypeScript <code>this</code> çš„ä»‹ç´¹ã€‚</p>
<p>å› æ­¤é€™ç¯‡æ–‡ç« çš„å‰åŠæ˜¯æˆ‘å° <a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">æ·ºè«‡ JavaScript é ­è™Ÿé›£é¡Œ thisï¼šçµ•å°ä¸å®Œæ•´ï¼Œä½†ä¿è­‰å¥½æ‡‚</a>
 é€™ç¯‡æ–‡ç« çš„ç­†è¨˜ã€å¾ŒåŠæ‰æ˜¯æ›¸ä¸­çš„ç­†è¨˜ã€‚</p>
<h3 id="é€™ç¯‡æ–‡æœƒæåˆ°">é€™ç¯‡æ–‡æœƒæåˆ° <a href="#%e9%80%99%e7%af%87%e6%96%87%e6%9c%83%e6%8f%90%e5%88%b0" class="anchor">ğŸ”—</a></h3><ul>
<li><a href="#%E5%9C%A8-javascript-%E5%85%A7%E7%9A%84-this">åœ¨ JavaScript å…§çš„ this</a>
<ul>
<li><a href="#%E9%9B%A2%E9%96%8B%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E5%BE%8Cthis-%E5%B0%B1%E6%B2%92%E6%9C%89%E4%BB%80%E9%BA%BC%E5%A4%AA%E5%A4%A7%E7%9A%84%E6%84%8F%E7%BE%A9">é›¢é–‹ç‰©ä»¶å°å‘å¾Œï¼Œthis å°±æ²’æœ‰ä»€éº¼å¤ªå¤§çš„æ„ç¾©</a></li>
<li><a href="#this-%E7%9A%84%E5%80%BC%E8%B7%9F%E5%9C%A8%E5%93%AA%E8%A3%A1%E5%AE%A3%E5%91%8A%E6%B2%92%E6%9C%89%E9%97%9C%E4%BF%82%E8%80%8C%E6%98%AF%E8%B7%9F%E5%A6%82%E4%BD%95%E5%91%BC%E5%8F%AB%E6%9C%89%E9%97%9C">this çš„å€¼è·Ÿåœ¨å“ªè£¡å®£å‘Šæ²’æœ‰é—œä¿‚ï¼Œè€Œæ˜¯è·Ÿå¦‚ä½•å‘¼å«æœ‰é—œ</a></li>
<li><a href="#%E9%80%8F%E9%81%8E-call-apply-bind-%E5%8F%AF%E4%BB%A5%E6%94%B9%E8%AE%8A-this-%E7%9A%84%E5%80%BC">é€é call, apply, bind å¯ä»¥æ”¹è®Š this çš„å€¼</a></li>
<li><a href="#%E7%AE%AD%E9%A0%AD%E5%87%BD%E5%BC%8Farrow-function-%E4%B8%AD%E6%9C%AC%E8%BA%AB%E6%B2%92%E6%9C%89-this">ç®­é ­å‡½å¼ï¼ˆarrow functionï¼‰ ä¸­ï¼Œæœ¬èº«æ²’æœ‰ this</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8-typescript-%E5%85%A7%E7%9A%84-this">åœ¨ TypeScript å…§çš„ this</a>
<ul>
<li><a href="#typescript-%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%82%BA-function-%E5%8A%A0%E4%B8%8A-this-%E9%80%99%E5%80%8B%E5%8F%83%E6%95%B8%E7%9A%84-type">TypeScript ä¸­å¯ä»¥ç‚º function åŠ ä¸Š this é€™å€‹åƒæ•¸çš„ type</a></li>
</ul>
</li>
</ul>
<h3 id="åœ¨-javascript-å…§çš„-this">åœ¨ JavaScript å…§çš„ this <a href="#%e5%9c%a8-javascript-%e5%85%a7%e7%9a%84-this" class="anchor">ğŸ”—</a></h3><h4 id="é›¢é–‹ç‰©ä»¶å°å‘å¾Œthis-å°±æ²’æœ‰ä»€éº¼å¤ªå¤§çš„æ„ç¾©">é›¢é–‹ç‰©ä»¶å°å‘å¾Œï¼Œthis å°±æ²’æœ‰ä»€éº¼å¤ªå¤§çš„æ„ç¾© <a href="#%e9%9b%a2%e9%96%8b%e7%89%a9%e4%bb%b6%e5%b0%8e%e5%90%91%e5%be%8cthis-%e5%b0%b1%e6%b2%92%e6%9c%89%e4%bb%80%e9%ba%bc%e5%a4%aa%e5%a4%a7%e7%9a%84%e6%84%8f%e7%be%a9" class="anchor">ğŸ”—</a></h4><p>åœ¨ JavaScript ä¸­ï¼Œæ‰€æœ‰åœ°æ–¹éƒ½èƒ½å­˜å–åˆ° <code>this</code>ï¼Œè€Œä½œè€…èªç‚ºã€Œåœ¨é›¢é–‹ç‰©ä»¶å°å‘å¾Œï¼Œ<code>this</code> å°±æ²’æœ‰ä»€éº¼å¤ªå¤§çš„æ„ç¾©ã€ã€‚</p>
<p>åœ¨è„«é›¢ç‰©ä»¶å°å‘çš„æƒ…æ³ä¸‹ï¼Œ<code>this</code> çš„å€¼åœ¨éåš´æ ¼æ¨¡å¼æ™‚ï¼Œç€è¦½å™¨ä¸‹æ˜¯ <code>window</code>ã€nodejs ä¸‹æ˜¯ <code>global</code>ï¼Œè€Œåœ¨åš´æ ¼æ¨¡å¼ä¸‹çš†ç‚º <code>undefined</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">();</span> <span class="c1">// Window
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">();</span> <span class="c1">// undefined
</span></span></span></code></pre></div><h4 id="this-çš„å€¼è·Ÿåœ¨å“ªè£¡å®£å‘Šæ²’æœ‰é—œä¿‚è€Œæ˜¯è·Ÿå¦‚ä½•å‘¼å«æœ‰é—œ">this çš„å€¼è·Ÿåœ¨å“ªè£¡å®£å‘Šæ²’æœ‰é—œä¿‚ï¼Œè€Œæ˜¯è·Ÿå¦‚ä½•å‘¼å«æœ‰é—œ <a href="#this-%e7%9a%84%e5%80%bc%e8%b7%9f%e5%9c%a8%e5%93%aa%e8%a3%a1%e5%ae%a3%e5%91%8a%e6%b2%92%e6%9c%89%e9%97%9c%e4%bf%82%e8%80%8c%e6%98%af%e8%b7%9f%e5%a6%82%e4%bd%95%e5%91%bc%e5%8f%ab%e6%9c%89%e9%97%9c" class="anchor">ğŸ”—</a></h4><p><code>this</code> çš„å€¼è·Ÿåœ¨å“ªè£¡å®£å‘Šæ²’æœ‰é—œä¿‚ï¼Œè€Œæ˜¯è·Ÿå¦‚ä½•å‘¼å«æœ‰é—œã€‚</p>
<p>è¦çŸ¥é“ <code>this</code> çš„å€¼ç‚ºä½•ï¼Œä½œè€…æä¾›çš„å°æ’‡æ­¥æ˜¯åœ¨ function å¾Œé¢åŠ  <code>.call()</code> ä¸¦å°‡ function ä¹‹å‰çš„å°è±¡å¡«å…¥ <code>.call(å°è±¡)</code> ä¸­ï¼Œå°±èƒ½çŸ¥é“ç•¶æ™‚çš„ <code>this</code> çš„å€¼ç‚ºä½•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">child</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span> <span class="mi">12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function ä¹‹å‰çš„å°è±¡ç‚º personï¼šperson.hello.call(person) -&gt; 35
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">personHello</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">personHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function ä¹‹å‰æ²’æœ‰å°è±¡ï¼špersonHello.call() -&gt; undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">child</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">child</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function ä¹‹å‰çš„å°è±¡ç‚º childï¼šchild.hello.call(child) -&gt; 12
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">childHello</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">childHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function ä¹‹å‰æ²’æœ‰å°è±¡ï¼šchildHello.call() -&gt; undefined
</span></span></span></code></pre></div><h4 id="é€é-call-apply-bind-å¯ä»¥æ”¹è®Š-this-çš„å€¼">é€é call, apply, bind å¯ä»¥æ”¹è®Š this çš„å€¼ <a href="#%e9%80%8f%e9%81%8e-call-apply-bind-%e5%8f%af%e4%bb%a5%e6%94%b9%e8%ae%8a-this-%e7%9a%84%e5%80%bc" class="anchor">ğŸ”—</a></h4><p>é›–ç„¶ <code>this</code> æœ‰æœ¬èº«çš„é è¨­å€¼ï¼ˆå‰é¢å…©é»æåˆ°çš„ï¼‰ï¼Œä½†ä¹Ÿå¯ä»¥é€éä¸‰ç¨®æ–¹å¼ä¾†æ”¹è®Šã€‚</p>
<ol>
<li><code>call</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s2">&#34;john&#34;</span><span class="p">);</span> <span class="c1">// 123
</span></span></span></code></pre></div><ol start="2">
<li><code>apply</code>ï¼šéœ€è¦ç”¨ array å‚³åƒæ•¸</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="p">[</span><span class="s2">&#34;john&#34;</span><span class="p">]);</span> <span class="c1">// 123
</span></span></span></code></pre></div><ol start="3">
<li><code>bind</code>ï¼šåœ¨ <code>bind</code> ä¹‹å¾Œï¼Œ<code>this</code> çš„å€¼å°±ä¸èƒ½å¤ å†æ”¹è®Š
ä½¿ç”¨ <code>bind</code> æœƒå›å‚³æ–°çš„ function</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">newHello</span> <span class="o">=</span> <span class="nx">hello</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">newHello</span><span class="p">(</span><span class="s2">&#34;john&#34;</span><span class="p">);</span> <span class="c1">// 123
</span></span></span></code></pre></div><h4 id="ç®­é ­å‡½å¼arrow-function-ä¸­æœ¬èº«æ²’æœ‰-this">ç®­é ­å‡½å¼ï¼ˆarrow functionï¼‰ ä¸­ï¼Œæœ¬èº«æ²’æœ‰ this <a href="#%e7%ae%ad%e9%a0%ad%e5%87%bd%e5%bc%8farrow-function-%e4%b8%ad%e6%9c%ac%e8%ba%ab%e6%b2%92%e6%9c%89-this" class="anchor">ğŸ”—</a></h4><p>åœ¨ arrow function ä¸­ï¼Œä»–è‡ªå·±æœ¬èº«æ²’æœ‰ <code>this</code>ã€‚
arrow function è£¡çš„ <code>this</code> å€¼ä¾†è‡ªå®£å‘Š arrow function æ™‚çš„ <code>this</code> æ˜¯ä»€éº¼å€¼ï¼Œé‚£å€‹å€¼å°±æ˜¯ arrow function å…§ <code>this</code> çš„å€¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">innerHello</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nx">innerHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span> <span class="c1">// person.hello.call(person) -&gt; 35
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">personHello</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">personHello</span><span class="p">();</span> <span class="c1">// personHello.call() -&gt; undefined
</span></span></span></code></pre></div><h3 id="åœ¨-typescript-å…§çš„-this">åœ¨ TypeScript å…§çš„ this <a href="#%e5%9c%a8-typescript-%e5%85%a7%e7%9a%84-this" class="anchor">ğŸ”—</a></h3><h4 id="typescript-ä¸­å¯ä»¥ç‚º-function-åŠ ä¸Š-this-é€™å€‹åƒæ•¸çš„-type">TypeScript ä¸­å¯ä»¥ç‚º function åŠ ä¸Š this é€™å€‹åƒæ•¸çš„ type <a href="#typescript-%e4%b8%ad%e5%8f%af%e4%bb%a5%e7%82%ba-function-%e5%8a%a0%e4%b8%8a-this-%e9%80%99%e5%80%8b%e5%8f%83%e6%95%b8%e7%9a%84-type" class="anchor">ğŸ”—</a></h4><p>åœ¨ TypeScript ä¸­å¯ä»¥ç‚º function åŠ ä¸Š <code>this</code> é€™å€‹åƒæ•¸çš„ typeï¼Œä½†å¯¦éš›ä¸Š <code>this</code> åƒæ•¸åœ¨åŸ·è¡ŒæœŸä¸­ä¸¦ä¸æœƒè¢«è¦–ç‚ºä¸€å€‹çœŸæ­£çš„åƒæ•¸ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ï¼ˆå–è‡ªæ›¸ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">addKeyListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fn</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="o">:</span> <span class="nx">HTMLElement</span><span class="p">,</span> <span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;keydown&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span> <span class="c1">// ~~ error: Expected 1 arguments, but got 2.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><code>this</code> æ˜¯ç”± JavaScript è¨­å®šçš„ï¼Œæ‰€ä»¥è¦ç”¨ <code>bind</code> <code>apply</code> <code>call</code> çš„æ–¹å¼å‚³å…¥ï¼Œä¸èƒ½ç”¨ä¸€èˆ¬å‚³åƒæ•¸çš„æ–¹å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">addKeyListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fn</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="o">:</span> <span class="nx">HTMLElement</span><span class="p">,</span> <span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;keydown&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ç•¶å®£å‘Š this çš„åƒæ•¸ï¼ŒTypeScript æœƒå¼·è¿«ä½ ç”¨æ­£ç¢ºçš„ <code>this</code> ä¾†å‘¼å« functionï¼Œé€éé€™ç¨®æ–¹å¼å¯ä»¥ç¢ºä¿å‹æ…‹å®‰å…¨ã€‚</p>
<p>å¦‚æœæ˜¯ä½¿ç”¨ arrow functionï¼Œä¹Ÿå’Œä¸Šé¢æåˆ°çš„ ã€Œç®­é ­å‡½å¼ï¼ˆarrow functionï¼‰ ä¸­ï¼Œæœ¬èº«æ²’æœ‰ thisã€ æ¦‚å¿µä¸€æ¨£ï¼Œåœ¨å®£å‘Š arrow function æ™‚ <code>this</code> æ˜¯ä»€éº¼å€¼ï¼Œarrow function çš„ <code>this</code> å°±æ˜¯ä»€éº¼å€¼ã€‚ä¸‹æ–¹çš„ <code>this</code> æŒ‡çš„æ˜¯ <code>Foo</code> é€™å€‹é¡åˆ¥ï¼Œè€Œ <code>Foo</code> æ²’æœ‰ <code>innerHTML</code> å±¬æ€§ï¼Œæ‰€ä»¥æœƒå ±éŒ¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">registerHandler</span><span class="p">(</span><span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">addKeyListener</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ~~~~~~~~~ Property &#39;innerHTML&#39; does not exist on type &#39;Foo&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="ç¸½çµ">ç¸½çµ <a href="#%e7%b8%bd%e7%b5%90" class="anchor">ğŸ”—</a></h3><p>å…ˆèªè­˜äº†åœ¨ JavaScript å…§çš„ <code>this</code>ï¼Œå†å»äº†è§£ TypeScript å…§çš„ <code>this</code>ï¼Œæˆ‘è¦ºå¾—å°±èƒ½æ›´å¥½åœ°å»ç†è§£ã€‚é€™ç¯‡æ•´ç†äº†ä¸€äº› <code>this</code> åœ¨ JavaScript å…§çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>é›¢é–‹ç‰©ä»¶å°å‘å¾Œï¼Œthis å°±æ²’æœ‰ä»€éº¼å¤ªå¤§çš„æ„ç¾©</li>
<li>this çš„å€¼è·Ÿåœ¨å“ªè£¡å®£å‘Šæ²’æœ‰é—œä¿‚ï¼Œè€Œæ˜¯è·Ÿå¦‚ä½•å‘¼å«æœ‰é—œ</li>
<li>é€é call, apply, bind å¯ä»¥æ”¹è®Š this çš„å€¼</li>
<li>ç®­é ­å‡½å¼ï¼ˆarrow functionï¼‰ ä¸­ï¼Œæœ¬èº«æ²’æœ‰ this
å†å»äº†è§£åœ¨ TypeScript è£¡çš„ <code>this</code>ï¼šTypeScript ä¸­å¯ä»¥ç‚º function åŠ ä¸Š this é€™å€‹åƒæ•¸çš„ type</li>
</ul>
<p>ä¹‹å¾Œå° <code>this</code> æœ‰æ›´å¤šäº†è§£æ™‚æœƒå†å›åˆ°é€™é‚Šæ“´å……çš„ï½ï¼</p>
<h3 id="ref-åƒè€ƒ">REF åƒè€ƒ <a href="#ref-%e5%8f%83%e8%80%83" class="anchor">ğŸ”—</a></h3><ul>
<li><a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">æ·ºè«‡ JavaScript é ­è™Ÿé›£é¡Œ thisï¼šçµ•å°ä¸å®Œæ•´ï¼Œä½†ä¿è­‰å¥½æ‡‚</a>
</li>
<li><a href="https://www.books.com.tw/products/0010858053" target="_blank">Effective TypeScript ä¸­æ–‡ç‰ˆ</a>
</li>
</ul>

    </div>

    

    <div class="disqus markdown" style="width: 100%;">
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-www-zzuhann-work';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</section>

</div>
      <div class="side">
         <div class="side-recent">
    <h2 class="side-title">
        <a href="/posts/">Recent Posts</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/posts/ts-unknown-vs-any/">Effective TypeScript: unknown vs any</a>
            </li>
        
            <li>
                <a href="/posts/use-slug-for-dynamic-routes/">ä½¿ç”¨ Next.js çš„ Dynamic Routes ä¾†è™•ç†å¤šå±¤çµæ§‹çš„é é¢</a>
            </li>
        
            <li>
                <a href="/posts/use-flex-to-limit-font-size/">ä½¿ç”¨ flex box ä¾†é˜²æ­¢å­—é«”è¢«å‹•æ…‹èª¿æ•´ï¼Ÿ</a>
            </li>
        
            <li>
                <a href="/posts/strict-false-ignore-null-ts/">tsconfig è¨­å®š strict: false æœƒå¿½ç•¥ null çš„å‹åˆ¥åˆ¤å®š</a>
            </li>
        
            <li>
                <a href="/posts/brain-can-not-multiwork/">è®€æ›¸æ—¥è¨˜ | å¤§è…¦æ²’è¾¦æ³•å¤šå·¥ï¼Œå³ä½¿è¨“ç·´ä¹Ÿä¸€æ¨£ï¼</a>
            </li>
        
    </ul>
</div>
 
        <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/typescript">typescript(4)</a>
            </li>
        
            <li>
                <a href="/categories/%E5%89%8D%E7%AB%AF">å‰ç«¯(2)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%8A%80%E8%A1%93">æŠ€è¡“(7)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%9D%82%E6%8A%80%E6%B5%85%E5%B0%9D">æ‚æŠ€æµ…å°(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%A7%80%E7%9C%8B%E7%AD%86%E8%A8%98">è§€çœ‹ç­†è¨˜(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%AE%80%E6%9B%B8%E6%97%A5%E8%A8%98">è®€æ›¸æ—¥è¨˜(2)</a>
            </li>
        
    </ul>
</div>
 <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/css">css (1)</a>
            </li>
        
            <li>
                <a href="/tags/css-challenge">css challenge (1)</a>
            </li>
        
            <li>
                <a href="/tags/effective-typescript">effective typescript (4)</a>
            </li>
        
            <li>
                <a href="/tags/hugo">hugo (3)</a>
            </li>
        
            <li>
                <a href="/tags/next.js">next.js (1)</a>
            </li>
        
            <li>
                <a href="/tags/reading-diary">reading diary (2)</a>
            </li>
        
            <li>
                <a href="/tags/typescript">typescript (2)</a>
            </li>
        
            <li>
                <a href="/tags/video-diary">video diary (1)</a>
            </li>
        
    </ul>
</div>

      </div>
    </main>
  </body>
</html>
