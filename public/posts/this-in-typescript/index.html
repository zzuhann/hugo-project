<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta content="this, TypeScript" name="keywords">
    <meta
      content="Effective TypeScript 系列：JavaScript 與 TypeScript 裡面的 this - Han"
      property="og:title"
    />
    <meta
      content="紀錄 han 的前端/生活/各種筆記與日常～！ - 這篇文章提到了在 JavaScript 和 TypeScript 中的 this。從 JavaScript 的角度出發，討論了 this 的概念，再到 TypeScript 的 this，介紹如何為 function 加上 this 參數的型別。"
      property="og:description"
    />
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width,minimum-scale=1">




<title>Effective TypeScript 系列：JavaScript 與 TypeScript 裡面的 this | Han</title>
<link rel="canonical" href="http://localhost:1313/posts/this-in-typescript/">
<meta name="description" content="這篇文章提到了在 JavaScript 和 TypeScript 中的 this。從 JavaScript 的角度出發，討論了 this 的概念，再到 TypeScript 的 this，介紹如何為 function 加上 this 參數的型別。" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Effective TypeScript 系列：JavaScript 與 TypeScript 裡面的 this | Han" />
<meta property="og:url" content="http://localhost:1313/posts/this-in-typescript/" />
<meta property="og:description" content="這篇文章提到了在 JavaScript 和 TypeScript 中的 this。從 JavaScript 的角度出發，討論了 this 的概念，再到 TypeScript 的 this，介紹如何為 function 加上 this 參數的型別。" />








<link rel="stylesheet" href="/lib/icofont/icofont.min.css" />
<link rel="stylesheet" href="/css/syntax.css" />
<link rel="stylesheet" href="/css/style.css" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />
 
  </head>

  <body>
    <header class="header-wrapper">
    <div class="header">
        <a class="site-title" href="http://localhost:1313/">Han</a>

        <nav class="menu">
            
                <div class="menu-item">
                    
                        <a href="/posts/">Posts</a>
                    
                </div>
            
                <div class="menu-item">
                    
                        <a href="/about/">About</a>
                    
                </div>
            
        </nav>
    </div>
</header>

    <main class="main-wrapper">
      <div class="main">

<section class="single">
    <h1 class="title">Effective TypeScript 系列：JavaScript 與 TypeScript 裡面的 this</h1>

    
        <div class="tip">
            <time datetime="2024-04-07 22:49:37 &#43;0800 CST">2024/04/07</time>
            <span class="split">·</span>
            <span> 1592 words </span>
            <span class="split">·</span>
            <span>
                4 minutes to read
            </span>
        </div>
    

    <div class="taxonomies">
        
        <div>
            Categories:
            
                <a href="/categories/typescript">TypeScript</a>
            
        </div>
        

        
            <div>
                Tags:
                
                    <a href="/tags/effective-typescript">Effective TypeScript</a>
                
            </div>
        
    </div>

    <hr />

    <div class="content">
        <h3 id="前言">前言 <a href="#%e5%89%8d%e8%a8%80" class="anchor">🔗</a></h3><p>這篇的內容主要會分為兩個部分：在 JavaScript 內的 this、以及在 TypeScript 內的 this。因為先前就對 <code>this</code> 感到陌生、好像了解了又好像沒有，書上對於 <code>this</code> 的著墨我覺得也不多，所以透過 huli 大大的這篇文章 <a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂</a>
 增加自己對於 JavaScript 內 <code>this</code> 的理解，再回頭去看書中對於 TypeScript <code>this</code> 的介紹。</p>
<p>因此這篇文章的前半是我對 <a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂</a>
 這篇文章的筆記、後半才是書中的筆記。</p>
<h3 id="這篇文會提到">這篇文會提到 <a href="#%e9%80%99%e7%af%87%e6%96%87%e6%9c%83%e6%8f%90%e5%88%b0" class="anchor">🔗</a></h3><ul>
<li><a href="#%E5%9C%A8-javascript-%E5%85%A7%E7%9A%84-this">在 JavaScript 內的 this</a>
<ul>
<li><a href="#%E9%9B%A2%E9%96%8B%E7%89%A9%E4%BB%B6%E5%B0%8E%E5%90%91%E5%BE%8Cthis-%E5%B0%B1%E6%B2%92%E6%9C%89%E4%BB%80%E9%BA%BC%E5%A4%AA%E5%A4%A7%E7%9A%84%E6%84%8F%E7%BE%A9">離開物件導向後，this 就沒有什麼太大的意義</a></li>
<li><a href="#this-%E7%9A%84%E5%80%BC%E8%B7%9F%E5%9C%A8%E5%93%AA%E8%A3%A1%E5%AE%A3%E5%91%8A%E6%B2%92%E6%9C%89%E9%97%9C%E4%BF%82%E8%80%8C%E6%98%AF%E8%B7%9F%E5%A6%82%E4%BD%95%E5%91%BC%E5%8F%AB%E6%9C%89%E9%97%9C">this 的值跟在哪裡宣告沒有關係，而是跟如何呼叫有關</a></li>
<li><a href="#%E9%80%8F%E9%81%8E-call-apply-bind-%E5%8F%AF%E4%BB%A5%E6%94%B9%E8%AE%8A-this-%E7%9A%84%E5%80%BC">透過 call, apply, bind 可以改變 this 的值</a></li>
<li><a href="#%E7%AE%AD%E9%A0%AD%E5%87%BD%E5%BC%8Farrow-function-%E4%B8%AD%E6%9C%AC%E8%BA%AB%E6%B2%92%E6%9C%89-this">箭頭函式（arrow function） 中，本身沒有 this</a></li>
</ul>
</li>
<li><a href="#%E5%9C%A8-typescript-%E5%85%A7%E7%9A%84-this">在 TypeScript 內的 this</a>
<ul>
<li><a href="#typescript-%E4%B8%AD%E5%8F%AF%E4%BB%A5%E7%82%BA-function-%E5%8A%A0%E4%B8%8A-this-%E9%80%99%E5%80%8B%E5%8F%83%E6%95%B8%E7%9A%84-type">TypeScript 中可以為 function 加上 this 這個參數的 type</a></li>
</ul>
</li>
</ul>
<h3 id="在-javascript-內的-this">在 JavaScript 內的 this <a href="#%e5%9c%a8-javascript-%e5%85%a7%e7%9a%84-this" class="anchor">🔗</a></h3><h4 id="離開物件導向後this-就沒有什麼太大的意義">離開物件導向後，this 就沒有什麼太大的意義 <a href="#%e9%9b%a2%e9%96%8b%e7%89%a9%e4%bb%b6%e5%b0%8e%e5%90%91%e5%be%8cthis-%e5%b0%b1%e6%b2%92%e6%9c%89%e4%bb%80%e9%ba%bc%e5%a4%aa%e5%a4%a7%e7%9a%84%e6%84%8f%e7%be%a9" class="anchor">🔗</a></h4><p>在 JavaScript 中，所有地方都能存取到 <code>this</code>，而作者認為「在離開物件導向後，<code>this</code> 就沒有什麼太大的意義」。</p>
<p>在脫離物件導向的情況下，<code>this</code> 的值在非嚴格模式時，瀏覽器下是 <code>window</code>、nodejs 下是 <code>global</code>，而在嚴格模式下皆為 <code>undefined</code>。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">();</span> <span class="c1">// Window
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">();</span> <span class="c1">// undefined
</span></span></span></code></pre></div><h4 id="this-的值跟在哪裡宣告沒有關係而是跟如何呼叫有關">this 的值跟在哪裡宣告沒有關係，而是跟如何呼叫有關 <a href="#this-%e7%9a%84%e5%80%bc%e8%b7%9f%e5%9c%a8%e5%93%aa%e8%a3%a1%e5%ae%a3%e5%91%8a%e6%b2%92%e6%9c%89%e9%97%9c%e4%bf%82%e8%80%8c%e6%98%af%e8%b7%9f%e5%a6%82%e4%bd%95%e5%91%bc%e5%8f%ab%e6%9c%89%e9%97%9c" class="anchor">🔗</a></h4><p><code>this</code> 的值跟在哪裡宣告沒有關係，而是跟如何呼叫有關。</p>
<p>要知道 <code>this</code> 的值為何，作者提供的小撇步是在 function 後面加 <code>.call()</code> 並將 function 之前的對象填入 <code>.call(對象)</code> 中，就能知道當時的 <code>this</code> 的值為何。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">child</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">age</span><span class="o">:</span> <span class="mi">12</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function 之前的對象為 person：person.hello.call(person) -&gt; 35
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">personHello</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">personHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function 之前沒有對象：personHello.call() -&gt; undefined
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">child</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">child</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">child</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function 之前的對象為 child：child.hello.call(child) -&gt; 12
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">childHello</span> <span class="o">=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">childHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="c1">// function 之前沒有對象：childHello.call() -&gt; undefined
</span></span></span></code></pre></div><h4 id="透過-call-apply-bind-可以改變-this-的值">透過 call, apply, bind 可以改變 this 的值 <a href="#%e9%80%8f%e9%81%8e-call-apply-bind-%e5%8f%af%e4%bb%a5%e6%94%b9%e8%ae%8a-this-%e7%9a%84%e5%80%bc" class="anchor">🔗</a></h4><p>雖然 <code>this</code> 有本身的預設值（前面兩點提到的），但也可以透過三種方式來改變。</p>
<ol>
<li><code>call</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="s2">&#34;john&#34;</span><span class="p">);</span> <span class="c1">// 123
</span></span></span></code></pre></div><ol start="2">
<li><code>apply</code>：需要用 array 傳參數</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">hello</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="p">[</span><span class="s2">&#34;john&#34;</span><span class="p">]);</span> <span class="c1">// 123
</span></span></span></code></pre></div><ol start="3">
<li><code>bind</code>：在 <code>bind</code> 之後，<code>this</code> 的值就不能夠再改變
使用 <code>bind</code> 會回傳新的 function</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="s2">&#34;use strict&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">hello</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">newHello</span> <span class="o">=</span> <span class="nx">hello</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nx">newHello</span><span class="p">(</span><span class="s2">&#34;john&#34;</span><span class="p">);</span> <span class="c1">// 123
</span></span></span></code></pre></div><h4 id="箭頭函式arrow-function-中本身沒有-this">箭頭函式（arrow function） 中，本身沒有 this <a href="#%e7%ae%ad%e9%a0%ad%e5%87%bd%e5%bc%8farrow-function-%e4%b8%ad%e6%9c%ac%e8%ba%ab%e6%b2%92%e6%9c%89-this" class="anchor">🔗</a></h4><p>在 arrow function 中，他自己本身沒有 <code>this</code>。
arrow function 裡的 <code>this</code> 值來自宣告 arrow function 時的 <code>this</code> 是什麼值，那個值就是 arrow function 內 <code>this</code> 的值。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">age</span><span class="o">:</span> <span class="mi">35</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">hello</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">innerHello</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">age</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">    <span class="nx">innerHello</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">();</span> <span class="c1">// person.hello.call(person) -&gt; 35
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">personHello</span> <span class="o">=</span> <span class="nx">person</span><span class="p">.</span><span class="nx">hello</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nx">personHello</span><span class="p">();</span> <span class="c1">// personHello.call() -&gt; undefined
</span></span></span></code></pre></div><h3 id="在-typescript-內的-this">在 TypeScript 內的 this <a href="#%e5%9c%a8-typescript-%e5%85%a7%e7%9a%84-this" class="anchor">🔗</a></h3><h4 id="typescript-中可以為-function-加上-this-這個參數的-type">TypeScript 中可以為 function 加上 this 這個參數的 type <a href="#typescript-%e4%b8%ad%e5%8f%af%e4%bb%a5%e7%82%ba-function-%e5%8a%a0%e4%b8%8a-this-%e9%80%99%e5%80%8b%e5%8f%83%e6%95%b8%e7%9a%84-type" class="anchor">🔗</a></h4><p>在 TypeScript 中可以為 function 加上 <code>this</code> 這個參數的 type，但實際上 <code>this</code> 參數在執行期中並不會被視為一個真正的參數，如下面的例子（取自書）：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">addKeyListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fn</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="o">:</span> <span class="nx">HTMLElement</span><span class="p">,</span> <span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;keydown&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span> <span class="c1">// ~~ error: Expected 1 arguments, but got 2.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><code>this</code> 是由 JavaScript 設定的，所以要用 <code>bind</code> <code>apply</code> <code>call</code> 的方式傳入，不能用一般傳參數的方式。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">addKeyListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">fn</span><span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="o">:</span> <span class="nx">HTMLElement</span><span class="p">,</span> <span class="nx">e</span>: <span class="kt">KeyboardEvent</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">void</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;keydown&#34;</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>當宣告 this 的參數，TypeScript 會強迫你用正確的 <code>this</code> 來呼叫 function，透過這種方式可以確保型態安全。</p>
<p>如果是使用 arrow function，也和上面提到的 「箭頭函式（arrow function） 中，本身沒有 this」 概念一樣，在宣告 arrow function 時 <code>this</code> 是什麼值，arrow function 的 <code>this</code> 就是什麼值。下方的 <code>this</code> 指的是 <code>Foo</code> 這個類別，而 <code>Foo</code> 沒有 <code>innerHTML</code> 屬性，所以會報錯。</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Foo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">registerHandler</span><span class="p">(</span><span class="nx">el</span>: <span class="kt">HTMLElement</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">addKeyListener</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// ~~~~~~~~~ Property &#39;innerHTML&#39; does not exist on type &#39;Foo&#39;
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="總結">總結 <a href="#%e7%b8%bd%e7%b5%90" class="anchor">🔗</a></h3><p>先認識了在 JavaScript 內的 <code>this</code>，再去了解 TypeScript 內的 <code>this</code>，我覺得就能更好地去理解。這篇整理了一些 <code>this</code> 在 JavaScript 內的特性：</p>
<ul>
<li>離開物件導向後，this 就沒有什麼太大的意義</li>
<li>this 的值跟在哪裡宣告沒有關係，而是跟如何呼叫有關</li>
<li>透過 call, apply, bind 可以改變 this 的值</li>
<li>箭頭函式（arrow function） 中，本身沒有 this
再去了解在 TypeScript 裡的 <code>this</code>：TypeScript 中可以為 function 加上 this 這個參數的 type</li>
</ul>
<p>之後對 <code>this</code> 有更多了解時會再回到這邊擴充的～！</p>
<h3 id="ref-參考">REF 參考 <a href="#ref-%e5%8f%83%e8%80%83" class="anchor">🔗</a></h3><ul>
<li><a href="https://blog.techbridge.cc/2019/02/23/javascript-this/" target="_blank">淺談 JavaScript 頭號難題 this：絕對不完整，但保證好懂</a>
</li>
<li><a href="https://www.books.com.tw/products/0010858053" target="_blank">Effective TypeScript 中文版</a>
</li>
</ul>

    </div>

    

    <div class="disqus markdown" style="width: 100%;">
        <div id="disqus_thread"></div>
<script type="text/javascript">

(function() {
    
    
    
    

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'https-www-zzuhann-work';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
</section>

</div>
      <div class="side">
         <div class="side-recent">
    <h2 class="side-title">
        <a href="/posts/">Recent Posts</a>
    </h2>
    <hr />

    <ul>
        
            <li>
                <a href="/posts/ts-unknown-vs-any/">Effective TypeScript: unknown vs any</a>
            </li>
        
            <li>
                <a href="/posts/use-slug-for-dynamic-routes/">使用 Next.js 的 Dynamic Routes 來處理多層結構的頁面</a>
            </li>
        
            <li>
                <a href="/posts/use-flex-to-limit-font-size/">使用 flex box 來防止字體被動態調整？</a>
            </li>
        
            <li>
                <a href="/posts/strict-false-ignore-null-ts/">tsconfig 設定 strict: false 會忽略 null 的型別判定</a>
            </li>
        
            <li>
                <a href="/posts/brain-can-not-multiwork/">讀書日記 | 大腦沒辦法多工，即使訓練也一樣！</a>
            </li>
        
    </ul>
</div>
 
        <div class="side-categories">
    <h2>Categories</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/categories/typescript">typescript(4)</a>
            </li>
        
            <li>
                <a href="/categories/%E5%89%8D%E7%AB%AF">前端(2)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%8A%80%E8%A1%93">技術(7)</a>
            </li>
        
            <li>
                <a href="/categories/%E6%9D%82%E6%8A%80%E6%B5%85%E5%B0%9D">杂技浅尝(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%A7%80%E7%9C%8B%E7%AD%86%E8%A8%98">觀看筆記(1)</a>
            </li>
        
            <li>
                <a href="/categories/%E8%AE%80%E6%9B%B8%E6%97%A5%E8%A8%98">讀書日記(2)</a>
            </li>
        
    </ul>
</div>
 <div class="side-tags">
    <h2>Tags</h2>
    <hr />

    <ul>
        
            <li>
                <a href="/tags/css">css (1)</a>
            </li>
        
            <li>
                <a href="/tags/css-challenge">css challenge (1)</a>
            </li>
        
            <li>
                <a href="/tags/effective-typescript">effective typescript (4)</a>
            </li>
        
            <li>
                <a href="/tags/hugo">hugo (3)</a>
            </li>
        
            <li>
                <a href="/tags/next.js">next.js (1)</a>
            </li>
        
            <li>
                <a href="/tags/reading-diary">reading diary (2)</a>
            </li>
        
            <li>
                <a href="/tags/typescript">typescript (2)</a>
            </li>
        
            <li>
                <a href="/tags/video-diary">video diary (1)</a>
            </li>
        
    </ul>
</div>

      </div>
    </main>
  </body>
</html>
